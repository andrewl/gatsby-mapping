{"data":{"markdownRemark":{"html":"<p>Problem: You want do embed a map on a page, perhaps with a marker and a popup</p>\n<p>Solution: Build a component based using the gatsby-plugin-leaflet-react plugin</p>\n<p>Find the code at: <a href=\"http://www.andrewl.net\">http://www.andrewl.net</a></p>\n<p>Example: [./simplemap]</p>\n<p>This is a very common use case - you want to embed a map on a page, and maybe\ninclude a marker which when clicked shows a popup information box.</p>\n<p>We can achieve this using Leaflet. Leaflet is \"an open source JavaScript libray\nfor mobile-friendly interactive maps\"</p>\n<p>Building on top of React-Leaflet, a library of components which \"leverages\nReact's lifecycle methods\" we can construct a SimpleMap component for our site\nwhich takes 3 properties</p>\n<ul>\n<li>location - a latitude and longitude pair expressed as an array (eg [-50.0, -1])</li>\n<li>zoom - a number XXX</li>\n<li>markerText (optional) - if supplied, this will display a marker which when\nclicked on will display the markerText</li>\n</ul>\n<p>The render() method for the component is quite simple:</p>\n<pre><code>render() {\n    return (\n      &#x3C;Map center={this.props.position} zoom={this.props.zoom}>\n        &#x3C;TileLayer\n          url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\"\n          attribution=\"&#x26;copy; &#x3C;a href=&#x26;quot;http://osm.org/copyright&#x26;quot;>OpenStreetMap&#x3C;/a> contributors\"\n        />\n        {this.props.markerText !== \"\" &#x26;&#x26;\n        &#x3C;Marker position={this.props.position}>\n          &#x3C;Popup>{this.props.markerText}&#x3C;/Popup>\n        &#x3C;/Marker>\n        }\n      &#x3C;/Map>\n    );\n}\n</code></pre>\n<p>To embed the component on a page though we need take one simple precaution. If\nwe try to include any of the leaflet libraries during a gatsby build we'll\nencounter a webpack error. To circumvent this we need to check whether window\nis defined, and if it is we render the SimpleComponent. This, from index.js\ndemonstrates the approach</p>\n<pre><code>&#x3C;Layout>\n  &#x3C;h1>Simple Leaflet Map&#x3C;/h1>\n  {typeof window !== 'undefined' &#x26;&#x26;\n      &#x3C;SimpleLeafletMap\n        position={[52,-0.5]}\n        zoom={8}\n        markerText={\"Hello, this is a marker\"}\n      />\n  }\n&#x3C;/Layout>\n</code></pre>\n<p>Blah blah</p>","frontmatter":{"date":"April 27, 2019","path":"/tutorials/simplemap","title":"Simple Map"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}