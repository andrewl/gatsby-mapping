{"data":{"markdownRemark":{"html":"<p>Find the code at <a href=\"https://github.com/andrewl/geogatsby/examples/simplemap\">https://github.com/andrewl/geogatsby/examples/simplemap</a></p>\n<p>See the demo at <a href=\"/simplemap/index.html\">/simplemap/index.html</a></p>\n<p>This is a very common use case - you want to embed a map on a page, and maybe\ninclude a marker which when clicked shows a popup information box.</p>\n<p>We can achieve this using Leaflet. Leaflet is <a href=\"https://leafletjs.com\">\"an open source JavaScript libray\nfor mobile-friendly interactive maps\"</a></p>\n<p>Building on top of React-Leaflet, a library of components which <a href=\"https://react-leaflet.js.org/\">\"leverages\nReact's lifecycle methods\"</a> we can construct a\nSimpleMap component for our site which takes 3 properties:</p>\n<ul>\n<li>location - a latitude and longitude pair expressed as an array\n(eg [-50.0, -1] for latitude -50.0, longitude -1)</li>\n<li>zoom - a number XXX</li>\n<li>markerText (optional) - if supplied, this will display a marker which when\nclicked on will display the markerText</li>\n</ul>\n<p>The render() method for the component is quite simple:</p>\n<pre><code>render() {\n    return (\n      &#x3C;Map center={this.props.position} zoom={this.props.zoom}>\n        &#x3C;TileLayer\n          url=\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\"\n          attribution=\"&#x26;copy; &#x3C;a href=&#x26;quot;http://osm.org/copyright&#x26;quot;>OpenStreetMap&#x3C;/a> contributors\"\n        />\n        {this.props.markerText !== \"\" &#x26;&#x26;\n        &#x3C;Marker position={this.props.position}>\n          &#x3C;Popup>{this.props.markerText}&#x3C;/Popup>\n        &#x3C;/Marker>\n        }\n      &#x3C;/Map>\n    );\n}\n</code></pre>\n<p>To embed the component on a page though we need take one simple precaution. If\nwe try to include any of the leaflet libraries during a gatsby build we'll\nencounter a webpack error. To circumvent this we need to check whether window\nis defined, and if it is we render the SimpleComponent. This, from index.js\ndemonstrates the approach</p>\n<pre><code>&#x3C;Layout>\n  &#x3C;h1>Simple Leaflet Map&#x3C;/h1>\n  {typeof window !== 'undefined' &#x26;&#x26;\n      &#x3C;SimpleLeafletMap\n        position={[52,-0.5]}\n        zoom={8}\n        markerText={\"Hello, this is a marker\"}\n      />\n  }\n&#x3C;/Layout>\n</code></pre>\n<p>This displays a map centered on latitude 52, longitude -0.5, with a zoom level\n8, and a marker, which when clicked up will display a popup with the text\n\"Hello, this is a marker\". </p>\n<p>To see this in action, <a href=\"/simplemap/index.html\">click here</a>.</p>","frontmatter":{"date":"April 27, 2019","path":"/tutorials/geodata","title":"Using ROAR geo data","problem":"You want to do rawwwww!","solution":"Blah de blah ssfdas dasdasdsda"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}